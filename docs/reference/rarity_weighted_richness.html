<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Rarity weighted richness — rarity_weighted_richness • prioritizr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Rarity weighted richness — rarity_weighted_richness" />
<meta property="og:description" content="Calculate irreplaceability scores for planning units selected in a solution
using rarity weighted richness (based on Williams et al. 1996). Please
note that this method is only recommended for large-scaled conservation
planning exercises (i.e. more than 100'000 planning units) where
irreplaceability scores cannot be calculated using the replacement cost
method (replacement_cost) in a feasible period of
time. This is because rarity weighted richness scores cannot (i) account for
the cost of different planning units, (ii) account for multiple management
zones, and (iii) identify truly irreplaceable planning units---unlike the
replacement cost metric which does not suffer any of these limitations." />
<meta property="og:image" content="https://prioritizr.net/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70466840-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70466840-4');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prioritizr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prioritizr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/gurobi_installation.html">Gurobi Installation Guide</a>
    </li>
    <li>
      <a href="../articles/publication_record.html">Publication Record</a>
    </li>
    <li>
      <a href="../articles/saltspring.html">Salt Spring Island Tutorial</a>
    </li>
    <li>
      <a href="../articles/tasmania.html">Tasmania Tutorial</a>
    </li>
    <li>
      <a href="../articles/zones.html">Management Zones</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/prioritizr/prioritizr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rarity weighted richness</h1>
    <small class="dont-index">Source: <a href='https://github.com/prioritizr/prioritizr/blob/master/R/rarity_weighted_richness.R'><code>R/rarity_weighted_richness.R</code></a></small>
    <div class="hidden name"><code>rarity_weighted_richness.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculate irreplaceability scores for planning units selected in a solution
using rarity weighted richness (based on Williams <em>et al.</em> 1996). Please
note that this method is only recommended for large-scaled conservation
planning exercises (i.e. more than 100'000 planning units) where
irreplaceability scores cannot be calculated using the replacement cost
method (<code><a href='replacement_cost.html'>replacement_cost</a></code>) in a feasible period of
time. This is because rarity weighted richness scores cannot (i) account for
the cost of different planning units, (ii) account for multiple management
zones, and (iii) identify truly irreplaceable planning units---unlike the
replacement cost metric which does not suffer any of these limitations.</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for ConservationProblem,numeric</span>
<span class='fu'>rarity_weighted_richness</span>(<span class='no'>x</span>, <span class='no'>solution</span>, <span class='no'>rescale</span>, <span class='no'>...</span>)

<span class='co'># S4 method for ConservationProblem,matrix</span>
<span class='fu'>rarity_weighted_richness</span>(<span class='no'>x</span>, <span class='no'>solution</span>, <span class='no'>rescale</span>, <span class='no'>...</span>)

<span class='co'># S4 method for ConservationProblem,data.frame</span>
<span class='fu'>rarity_weighted_richness</span>(<span class='no'>x</span>, <span class='no'>solution</span>, <span class='no'>rescale</span>, <span class='no'>...</span>)

<span class='co'># S4 method for ConservationProblem,Spatial</span>
<span class='fu'>rarity_weighted_richness</span>(<span class='no'>x</span>, <span class='no'>solution</span>, <span class='no'>rescale</span>, <span class='no'>...</span>)

<span class='co'># S4 method for ConservationProblem,Raster</span>
<span class='fu'>rarity_weighted_richness</span>(<span class='no'>x</span>, <span class='no'>solution</span>, <span class='no'>rescale</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='ConservationProblem-class.html'>ConservationProblem-class</a></code> object.</p></td>
    </tr>
    <tr>
      <th>solution</th>
      <td><p><code>numeric</code>, <code>matrix</code>, <code>data.frame</code>,
<code><a href='https://www.rdocumentation.org/packages/raster/topics/Raster-classes'>Raster-class</a></code>, or <code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code>
object. See the Details section for more information.</p></td>
    </tr>
    <tr>
      <th>rescale</th>
      <td><p><code>logical</code> flag indicating non-zero scores should be
rescaled to range between 0.01 and 1. Defaults to <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>not used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>numeric</code>, <code>matrix</code>,
  <code><a href='https://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterLayer-class</a></code>, or
  <code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> object containing the rarity weighted
  richness scores for each planning unit in the solution.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Rarity weighted richness scores are calculated using the following
  terms . Let \(I\) denote the set of planning units (indexed by
  \(i\)), let \(J\) denote the set of conservation features (indexed by
  \(j\)), let \(r_{ij}\) denote the amount of feature \(j\)
  associated with planning unit \(i\), and let \(M_j\) denote the
  maximum value of feature \(j\) in \(r_{ij}\) in all planning units
  \(i \in I\). To calculate the rarity weighted richness (<em>RWR</em>) for
  planning unit \(k\):</p>
<p>$$
  \mathit{RWR}_{k} = \sum_{j}^{J} \frac{ \frac{r_{kj}}{M_j} }{
                                          \sum_{i}^{I} r_{ij}}
  $$</p>
<p>Note that all arguments to <code>solution</code> must correspond
  to the planning unit data in the argument to <code>x</code> in terms
  of data representation, dimensionality, and spatial attributes (if
  applicable). This means that if the planning unit data in <code>x</code>
  is a <code>numeric</code> vector then the argument to <code>solution</code> must be a
  <code>numeric</code> vector with the same number of elements, if the planning
  unit data in <code>x</code> is a <code><a href='https://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterLayer-class</a></code> then the
  argument to <code>solution</code> must also be a
  <code><a href='https://www.rdocumentation.org/packages/raster/topics/Raster-classes'>RasterLayer-class</a></code> with the same number of rows and
  columns and the same resolution, extent, and coordinate reference system,
  if the planning unit data in <code>x</code> is a <code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code>
  object then the argument to <code>solution</code> must also be a
  <code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial-class</a></code> object and have the same number of spatial
  features (e.g. polygons) and have the same coordinate reference system,
  if the planning units in <code>x</code> are a <code>data.frame</code> then the
  argument to <code>solution</code> must also be a <code>data.frame</code> with each
  column correspond to a different zone and each row correspond to
  a different planning unit, and values correspond to the allocations
  (e.g. values of zero or one).</p>
<p>Solutions must have planning unit statuses set to missing (<code>NA</code>)
  values for planning units that have missing (<code>NA</code>) cost data. For
  problems with multiple zones, this means that planning units must have
  missing (<code>NA</code>) allocation values in zones where they have missing
  (<code>NA</code>) cost data. In other words, planning units that have missing
  (<code>NA</code>) cost values in <code>x</code> should always have a missing
  (<code>NA</code>) value the argument to <code>solution</code>. If an argument is
  supplied to
  <code>solution</code> where this is not the case, then an error will be thrown.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Williams P, Gibbons D, Margules C, Rebelo A, Humphries C, and Pressey RL
(1996) A comparison of richness hotspots, rarity hotspots and complementary
areas for conserving diversity using British birds.
<em>Conservation Biology</em>, 10: 155--174.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='irreplaceability.html'>irreplaceability</a></code>.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># seed seed for reproducibility</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Random'>set.seed</a></span>(<span class='fl'>600</span>)

<span class='co'># load data</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>)

<span class='co'># create minimal problem with binary decisions</span>
<span class='no'>p1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='problem.html'>problem</a></span>(<span class='no'>sim_pu_raster</span>, <span class='no'>sim_features</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_min_set_objective.html'>add_min_set_objective</a></span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_relative_targets.html'>add_relative_targets</a></span>(<span class='fl'>0.1</span>) <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_binary_decisions.html'>add_binary_decisions</a></span>() <span class='kw'>%&gt;%</span>
      <span class='fu'><a href='add_default_solver.html'>add_default_solver</a></span>(<span class='kw'>gap</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='input'><span class='co'># solve problem</span>
<span class='no'>s1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='solve.html'>solve</a></span>(<span class='no'>p1</span>)

<span class='co'># print solution</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>s1</span>)</div><div class='output co'>#&gt; class      : RasterLayer 
#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)
#&gt; resolution : 0.1, 0.1  (x, y)
#&gt; extent     : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
#&gt; crs        : NA 
#&gt; source     : memory
#&gt; names      : layer 
#&gt; values     : 0, 1  (min, max)
#&gt; </div><div class='input'>
<span class='co'># plot solution</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>s1</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"solution"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='rarity_weighted_richness-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># calculate irreplaceability scores</span>
<span class='no'>rwr1</span> <span class='kw'>&lt;-</span> <span class='fu'>rarity_weighted_richness</span>(<span class='no'>p1</span>, <span class='no'>s1</span>)

<span class='co'># print irreplaceability scores</span>
<span class='fu'><a href='print.html'>print</a></span>(<span class='no'>rwr1</span>)</div><div class='output co'>#&gt; class      : RasterLayer 
#&gt; dimensions : 10, 10, 100  (nrow, ncol, ncell)
#&gt; resolution : 0.1, 0.1  (x, y)
#&gt; extent     : 0, 1, 0, 1  (xmin, xmax, ymin, ymax)
#&gt; crs        : NA 
#&gt; source     : memory
#&gt; names      : layer 
#&gt; values     : 0, 1  (min, max)
#&gt; </div><div class='input'>
<span class='co'># plot irreplaceability scores</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>rwr1</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"rarity weighted richness"</span>, <span class='kw'>axes</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>box</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='img'><img src='rarity_weighted_richness-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://jeffrey-hanson.com'>Jeffrey O Hanson</a>, <a href='http://www.richard-schuster.com'>Richard Schuster</a>, Nina Morrell, <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, Matthew E Watts, <a href='https://arcese.forestry.ubc.ca'>Peter Arcese</a>, <a href='https://josephrbennett.wordpress.com'>Joseph Bennett</a>, <a href='http://www.possinghamlab.org'>Hugh P Possingham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '486efa122ea6783724263412c5f28ab3',
    indexName: 'prioritizr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

